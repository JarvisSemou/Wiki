## 功能对照表

商品类型 | 重复购买 | 叠加套餐内容 | 激活时清空用量 | 每个用户同时只能有一个激活的订单
--------|---------|-------------|---------------|-------------------
时间流量包 | ✔ | ✕ | ✔ | ✔
流量包     | ✔ | ✔ | ✕ | ✕
时间包     | ✔ | ✔`*` | ✕ | ✕

`*` 只有当时间包的等级与付费用户当前等级相同时才会叠加等级时长，免费用户不受此限制

## 时间流量包（Time and Bandwidth Package, TABP）

即 SSPanel 旧商店系统中的默认产品模式，每个 TABP 中包含固定的 等级+等级时长+流量，用户可以一次性购买多个，但同一时间只能有一个 TABP 订单处于激活状态，多个 TABP 订单会按照购买顺序轮流激活，同时过期（以`商品时长`计算）的 TABP 订单会被标注为 `已过期`。

每个 TABP 订单会在最长一个 Cron 周期（5分钟）的时间内被激活，一个 Cron 周期内每个用户只有一个 TABP 订单会被激活。

## 流量包（Bandwidth Package）

其对应的是 SSPanel 旧商店系统中的追加流量包，用户可以一次性购买多个，流量包的内容会叠加至用户当前总可用流量，多个流量包订单会按照购买顺序轮流激活。

每个流量包订单会在最长一个 Cron 周期（5分钟）的时间内被激活，一个 Cron 周期内每个用户只有一个流量包订单会被激活。

## 时间包（Time Package）

时间包是 SSPanel 新商店系统中添加的一种独特产品类型，其目的是提供等级，等级时长与流量分离的计费模式（按量付费）。

当免费用户购买时，时间包与 TABP 表现一致，但其并**不会**重置购买用户的已用流量或总流量。

当付费用户当前等级等于时间包中的等级时，时间包中的等级时长会被用于延长用户当前的等级时长，并且时间包中的`用户分组`，`速率限制`和`同时连接 IP 限制`参数会直接覆盖用户当前账户中的数值。

当付费用户当前等级不等于时间包中的等级时，时间包则会在用户当前等级过期后才会被激活。

每个时间包订单会在最长一个 Cron 周期（5分钟）的时间内被激活，一个 Cron 周期内每个用户只有一个时间包订单会被激活。
